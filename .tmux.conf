# =============================================
# 1. CORE & PERFORMANCE
# =============================================
# Enable mouse (resize, select, scroll)
set -g mouse on

# Fix colors for WezTerm/Alacritty
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Increase scrollback history
set -g history-limit 10000

# Zero delay for escape key (essential for Vim/Neovim users)
set -s escape-time 0

# =============================================
# 2. KEY BINDINGS (DEVELOPER FRIENDLY)
# =============================================

# --- A. Prefix Key ---
# Change Prefix from Ctrl+b to Ctrl+Space (Much easier to hit)
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# --- B. Instant Splits (No Prefix) ---
# Use Alt + \ for Vertical Split ( | )
# Use Alt + - for Horizontal Split ( - )
# (Keeps the current directory!)
bind -n M-\\ split-window -h -c "#{pane_current_path}"
bind -n M-- split-window -v -c "#{pane_current_path}"

# Also keep your WezTerm preference: Ctrl+Alt+v/h
bind -n C-M-v split-window -h -c "#{pane_current_path}"
bind -n C-M-h split-window -v -c "#{pane_current_path}"

# --- C. Instant Navigation (Vim Style) ---
# Move between panes using Alt + h/j/k/l (No Prefix)
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# --- D. Browser-Like Tab Management ---
# Ctrl + t  -> New Tab (Window)
bind -n C-t new-window -c "#{pane_current_path}"

# Ctrl + w  -> Close Current Pane/Tab
bind -n C-w kill-pane

# Alt + 1..9 -> Switch Tabs
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# --- E. Resizing ---
# Ctrl + Arrow Keys to resize (Small adjustments)
bind -n M-Left resize-pane -L 2
bind -n M-Right resize-pane -R 2
bind -n M-Up resize-pane -U 2
bind -n M-Down resize-pane -D 2

# =============================================
# 3. VISUAL THEME (MINIMALIST)
# =============================================
set-option -g status-position top
set -g status-style bg=default,fg=white
set -g status-left "#[fg=blue,bold] Ôãê  #S  "
set -g status-right "" # Clean right side
set -g window-status-format "#[fg=gray]  #I: #W  "
set -g window-status-current-format "#[fg=white,bold]  #I: #W* "
set -g status-left-length 50

# Format: Index: FolderName
# #{b:pane_current_path} gives you the "basename" (current folder name only)
# If you want the full path, use #{pane_current_path} instead.

set -g window-status-format "#[fg=gray]  #I: #{b:pane_current_path}  "
set -g window-status-current-format "#[fg=white,bold]  #I: #{b:pane_current_path}* "

# Update the status bar every 1 second (so the path updates instantly when you 'cd')
set -g status-interval 1

# =============================================
# 4. PLUGINS (SESSION RESTORE)
# =============================================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Auto-Restore Strategy
set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

# Initialize TMUX plugin manager (Keep this at the very bottom)
run '~/.tmux/plugins/tpm/tpm'
