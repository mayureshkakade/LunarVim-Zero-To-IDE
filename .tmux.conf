# =============================================
# 1. CORE & PERFORMANCE
# =============================================
# Enable mouse (resize, select, scroll)
set -g mouse on

# Fix colors for modern terminals (WezTerm/Alacritty/iTerm2)
set -g default-terminal "tmux-256color"
# Enable true color (24-bit RGB) support
set -ag terminal-overrides ",xterm-256color:RGB"

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1
# Automatically renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback history
set -g history-limit 10000

# Zero delay for escape key (essential for Vim/Neovim users)
set -s escape-time 0


# =============================================
# 2. KEY BINDINGS (DEVELOPER FRIENDLY)
# =============================================

# --- A. Prefix Key ---
# Change Prefix from Ctrl+b to Ctrl+Space (Much easier to hit)
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# --- B. Splits (With Prefix) ---
# Use Prefix + \ for Vertical Split ( | )
# Use Prefix + - for Horizontal Split ( - )
# (Keeps the current directory!)
bind \\ split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"


# --- C. Instant Navigation (Vim Style) ---
# Move between panes using Prefix + h/j/k/l
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# --- D. Browser-Like Tab Management ---
# Prefix + t  -> New Tab (Window)
bind t new-window -c "#{pane_current_path}"

# Prefix + w  -> Close Current Pane/Tab
bind w kill-pane

# Prefix + 1..9 -> Switch Tabs
bind 1 select-window -t 1
bind 2 select-window -t 2
bind 3 select-window -t 3
bind 4 select-window -t 4
bind 5 select-window -t 5
bind 6 select-window -t 6
bind 7 select-window -t 7
bind 8 select-window -t 8
bind 9 select-window -t 9

# --- E. Resizing ---
# Alt/Option + Arrow Keys to resize panes (without prefix)
bind -n M-Left resize-pane -L 2
bind -n M-Right resize-pane -R 2
bind -n M-Up resize-pane -U 2
bind -n M-Down resize-pane -D 2

# =============================================
# 3. VISUAL THEME (MINIMALIST)
# =============================================
# Position status bar at the top
set-option -g status-position top

# Catppuccin theme configuration
set -g @catppuccin_flavor 'mocha'
set -g @catppuccin_window_status_style "rounded"

# Display current directory basename in window titles
# Active window shows current path
set -g @catppuccin_window_current_text " #{b:pane_current_path}"
# Inactive windows also show their current path
set -g @catppuccin_window_text " #{b:pane_current_path}"

# Custom status bar configuration
set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
set -g status-right "#{E:@catppuccin_status_application} #{E:@catppuccin_status_session} #{E:@catppuccin_status_date_time}"

# Update status bar every second (for real-time clock)
set -g status-interval 1

# =============================================
# 4. PLUGINS
# =============================================

# Catppuccin theme plugin
set -g @plugin 'catppuccin/tmux#v2.1.3'
# TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'
# Sensible defaults for tmux
set -g @plugin 'tmux-plugins/tmux-sensible'
# Save and restore tmux sessions (manual with Prefix + Ctrl+s / Ctrl+r)
set -g @plugin 'tmux-plugins/tmux-resurrect'
# Automatic session save/restore
set -g @plugin 'tmux-plugins/tmux-continuum'

# Session restore configuration
# Save pane contents for full session recovery
set -g @resurrect-capture-pane-contents 'on'
# Automatically restore last saved session on tmux start
set -g @continuum-restore 'on'

# Initialize TMUX plugin manager (Keep this at the very bottom)
run '~/.tmux/plugins/tpm/tpm'

